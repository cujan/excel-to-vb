<?php

$link = mysqli_connect('localhost','mkocan','mkocan', "playground"); 
if (!$link) { 
	die('Could not connect to MySQL: ' . mysql_error()); 
} 

$query = "select cislo, datum from jqplot ";

$result = mysqli_query($link, $query);

while($row = mysqli_fetch_array($result)) {
$jsArray[]=array($row["datum"], (float)$row["cislo"]);
}

$dataArray=json_encode($jsArray);

echo '<!DOCTYPE html>

<html>
<head>

    <title>Vaha</title>

    <link class="include" rel="stylesheet" type="text/css" href="./jqplot/jquery.jqplot.min.css" />
    <!--[if lt IE 9]><script language="javascript" type="text/javascript" src="./jqplot/excanvas.js"></script><![endif]-->
    <script class="include" type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    
   
</head>
<body>
  <div class="col1" id="content">

    <div id="chart1" style="height:200px; width:600px;"></div>

<script type="text/javascript">
$(document).ready(function(){
    vaha = '.$dataArray.';
'."
    var plot1 = $.jqplot('chart1', [vaha], { 
        title: 'Vaha', 
        series: [{ 
            label: 'Vaha', 
            neighborThreshold: -1 
        }], 
        axes: { 
            xaxis: { 
                renderer:$.jqplot.DateAxisRenderer,
                tickRenderer: $.jqplot.CanvasAxisTickRenderer,
                tickOptions: {
                  angle: -30
                } 
            }, 
            yaxis: {  
                renderer: $.jqplot.LogAxisRenderer,
                tickOptions:{ prefix: '$' } 
            } 
        }, 
        cursor:{
            show: true, 
            zoom: true
        } 
    });
});
</script>
".'
    <script class="include" type="text/javascript" src="./jqplot/jquery.jqplot.min.js"></script>
    <script class="include" type="text/javascript" src="./jqplot/plugins/jqplot.cursor.min.js"></script>
    <script class="include" type="text/javascript" src="./jqplot/plugins/jqplot.dateAxisRenderer.min.js"></script>
    <script class="include" type="text/javascript" src="./jqplot/plugins/jqplot.logAxisRenderer.min.js"></script>
    <script class="include" type="text/javascript" src="./jqplot/plugins/jqplot.canvasTextRenderer.min.js"></script>
    <script class="include" type="text/javascript" src="./jqplot/plugins/jqplot.canvasAxisTickRenderer.min.js"></script>

  </div>

</body>


</html>';
?>